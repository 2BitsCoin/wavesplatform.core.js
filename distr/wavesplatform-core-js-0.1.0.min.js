function normalizeInput(input){var ret;if(input instanceof Uint8Array)ret=input;else if(input instanceof Buffer)ret=new Uint8Array(input);else{if("string"!=typeof input)throw new Error(ERROR_MSG_INPUT);ret=new Uint8Array(new Buffer(input,"utf8"))}return ret}function toHex(bytes){return Array.prototype.map.call(bytes,function(n){return(n<16?"0":"")+n.toString(16)}).join("")}function uint32ToHex(val){return(4294967296+val).toString(16).substring(1)}function debugPrint(label,arr,size){for(var msg="\n"+label+" = ",i=0;i<arr.length;i+=2){if(32===size)msg+=uint32ToHex(arr[i]).toUpperCase(),msg+=" ",msg+=uint32ToHex(arr[i+1]).toUpperCase();else{if(64!==size)throw new Error("Invalid size "+size);msg+=uint32ToHex(arr[i+1]).toUpperCase(),msg+=uint32ToHex(arr[i]).toUpperCase()}i%6===4?msg+="\n"+new Array(label.length+4).join(" "):i<arr.length-2&&(msg+=" ")}console.log(msg)}function testSpeed(hashFn,N,M){for(var startMs=(new Date).getTime(),input=new Uint8Array(N),i=0;i<N;i++)input[i]=i%256;var genMs=(new Date).getTime();for(console.log("Generated random input in "+(genMs-startMs)+"ms"),startMs=genMs,i=0;i<M;i++){var hashHex=hashFn(input),hashMs=(new Date).getTime(),ms=hashMs-startMs;startMs=hashMs,console.log("Hashed in "+ms+"ms: "+hashHex.substring(0,20)+"..."),console.log(Math.round(N/(1<<20)/(ms/1e3)*100)/100+" MB PER SECOND")}}function ADD64AA(v,a,b){var o0=v[a]+v[b],o1=v[a+1]+v[b+1];o0>=4294967296&&o1++,v[a]=o0,v[a+1]=o1}function ADD64AC(v,a,b0,b1){var o0=v[a]+b0;b0<0&&(o0+=4294967296);var o1=v[a+1]+b1;o0>=4294967296&&o1++,v[a]=o0,v[a+1]=o1}function B2B_GET32(arr,i){return arr[i]^arr[i+1]<<8^arr[i+2]<<16^arr[i+3]<<24}function B2B_G(a,b,c,d,ix,iy){var x0=m[ix],x1=m[ix+1],y0=m[iy],y1=m[iy+1];ADD64AA(v,a,b),ADD64AC(v,a,x0,x1);var xor0=v[d]^v[a],xor1=v[d+1]^v[a+1];v[d]=xor1,v[d+1]=xor0,ADD64AA(v,c,d),xor0=v[b]^v[c],xor1=v[b+1]^v[c+1],v[b]=xor0>>>24^xor1<<8,v[b+1]=xor1>>>24^xor0<<8,ADD64AA(v,a,b),ADD64AC(v,a,y0,y1),xor0=v[d]^v[a],xor1=v[d+1]^v[a+1],v[d]=xor0>>>16^xor1<<16,v[d+1]=xor1>>>16^xor0<<16,ADD64AA(v,c,d),xor0=v[b]^v[c],xor1=v[b+1]^v[c+1],v[b]=xor1>>>31^xor0<<1,v[b+1]=xor0>>>31^xor1<<1}function blake2b_compress(ctx,last){var i=0;for(i=0;i<16;i++)v[i]=ctx.h[i],v[i+16]=BLAKE2B_IV32[i];for(v[24]=v[24]^ctx.t,v[25]=v[25]^ctx.t/4294967296,last&&(v[28]=~v[28],v[29]=~v[29]),i=0;i<32;i++)m[i]=B2B_GET32(ctx.b,4*i);for(i=0;i<12;i++)B2B_G(0,8,16,24,SIGMA82[16*i+0],SIGMA82[16*i+1]),B2B_G(2,10,18,26,SIGMA82[16*i+2],SIGMA82[16*i+3]),B2B_G(4,12,20,28,SIGMA82[16*i+4],SIGMA82[16*i+5]),B2B_G(6,14,22,30,SIGMA82[16*i+6],SIGMA82[16*i+7]),B2B_G(0,10,20,30,SIGMA82[16*i+8],SIGMA82[16*i+9]),B2B_G(2,12,22,24,SIGMA82[16*i+10],SIGMA82[16*i+11]),B2B_G(4,14,16,26,SIGMA82[16*i+12],SIGMA82[16*i+13]),B2B_G(6,8,18,28,SIGMA82[16*i+14],SIGMA82[16*i+15]);for(i=0;i<16;i++)ctx.h[i]=ctx.h[i]^v[i]^v[i+16]}function blake2b_init(outlen,key){if(0===outlen||outlen>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(key&&key.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var ctx={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:outlen},i=0;i<16;i++)ctx.h[i]=BLAKE2B_IV32[i];var keylen=key?key.length:0;return ctx.h[0]^=16842752^keylen<<8^outlen,key&&(blake2b_update(ctx,key),ctx.c=128),ctx}function blake2b_update(ctx,input){for(var i=0;i<input.length;i++)128===ctx.c&&(ctx.t+=ctx.c,blake2b_compress(ctx,!1),ctx.c=0),ctx.b[ctx.c++]=input[i]}function blake2b_final(ctx){for(ctx.t+=ctx.c;ctx.c<128;)ctx.b[ctx.c++]=0;blake2b_compress(ctx,!0);for(var out=new Uint8Array(ctx.outlen),i=0;i<ctx.outlen;i++)out[i]=ctx.h[i>>2]>>8*(3&i);return out}function blake2b(input,key,outlen){outlen=outlen||64,input=normalizeInput(input);var ctx=blake2b_init(outlen,key);return blake2b_update(ctx,input),blake2b_final(ctx)}function blake2bHex(input,key,outlen){var output=blake2b(input,key,outlen);return toHex(output)}var ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array",BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],SIGMA82=new Uint8Array(SIGMA8.map(function(x){return 2*x})),v=new Uint32Array(32),m=new Uint32Array(32),converters=function(){var i,charToNibble={},nibbleToChar=[];for(i=0;i<=9;++i){var character=i.toString();charToNibble[character]=i,nibbleToChar.push(character)}for(i=10;i<=15;++i){var lowerChar=String.fromCharCode("a".charCodeAt(0)+i-10),upperChar=String.fromCharCode("A".charCodeAt(0)+i-10);charToNibble[lowerChar]=i,charToNibble[upperChar]=i,nibbleToChar.push(lowerChar)}return{byteArrayToHexString:function(bytes){for(var str="",i=0;i<bytes.length;++i)bytes[i]<0&&(bytes[i]+=256),str+=nibbleToChar[bytes[i]>>4]+nibbleToChar[15&bytes[i]];return str},stringToByteArray:function(str){str=unescape(encodeURIComponent(str));for(var bytes=new Array(str.length),i=0;i<str.length;++i)bytes[i]=str.charCodeAt(i);return bytes},hexStringToByteArray:function(str){var bytes=[],i=0;for(0!==str.length%2&&(bytes.push(charToNibble[str.charAt(0)]),++i);i<str.length-1;i+=2)bytes.push((charToNibble[str.charAt(i)]<<4)+charToNibble[str.charAt(i+1)]);return bytes},stringToHexString:function(str){return this.byteArrayToHexString(this.stringToByteArray(str))},hexStringToString:function(hex){return this.byteArrayToString(this.hexStringToByteArray(hex))},checkBytesToIntInput:function(bytes,numBytes,opt_startIndex){var startIndex=opt_startIndex||0;if(startIndex<0)throw new Error("Start index should not be negative");if(bytes.length<startIndex+numBytes)throw new Error("Need at least "+numBytes+" bytes to convert to an integer");return startIndex},byteArrayToSignedShort:function(bytes,opt_startIndex){var index=this.checkBytesToIntInput(bytes,2,opt_startIndex),value=bytes[index];return value+=bytes[index+1]<<8},byteArrayToSignedInt32:function(bytes,opt_startIndex){var index=this.checkBytesToIntInput(bytes,4,opt_startIndex);return value=bytes[index],value+=bytes[index+1]<<8,value+=bytes[index+2]<<16,value+=bytes[index+3]<<24,value},byteArrayToBigInteger:function(bytes,opt_startIndex){for(var temp1,temp2,value=(this.checkBytesToIntInput(bytes,8,opt_startIndex),new BigInteger("0",10)),i=7;i>=0;i--)temp1=value.multiply(new BigInteger("256",10)),temp2=temp1.add(new BigInteger(bytes[opt_startIndex+i].toString(10),10)),value=temp2;return value},byteArrayToWordArray:function(byteArray){for(var i=0,offset=0,word=0,len=byteArray.length,words=new Uint32Array((len/4|0)+(len%4==0?0:1));i<len-len%4;)words[offset++]=byteArray[i++]<<24|byteArray[i++]<<16|byteArray[i++]<<8|byteArray[i++];len%4!=0&&(word=byteArray[i++]<<24,len%4>1&&(word|=byteArray[i++]<<16),len%4>2&&(word|=byteArray[i++]<<8),words[offset]=word);var wordArray=new Object;return wordArray.sigBytes=len,wordArray.words=words,wordArray},wordArrayToByteArray:function(wordArray){return converters.wordArrayToByteArrayImpl(wordArray,!0)},wordArrayToByteArrayImpl:function(wordArray,isFirstByteHasSign){var len=wordArray.words.length;if(0==len)return new Array(0);var word,i,byteArray=new Array(wordArray.sigBytes),offset=0;for(i=0;i<len-1;i++)word=wordArray.words[i],byteArray[offset++]=isFirstByteHasSign?word>>24:word>>24&255,byteArray[offset++]=word>>16&255,byteArray[offset++]=word>>8&255,byteArray[offset++]=255&word;return word=wordArray.words[len-1],byteArray[offset++]=isFirstByteHasSign?word>>24:word>>24&255,wordArray.sigBytes%4==0&&(byteArray[offset++]=word>>16&255,byteArray[offset++]=word>>8&255,byteArray[offset++]=255&word),wordArray.sigBytes%4>1&&(byteArray[offset++]=word>>16&255),wordArray.sigBytes%4>2&&(byteArray[offset++]=word>>8&255),byteArray},byteArrayToString:function(bytes,opt_startIndex,length){if(0==length)return"";if(opt_startIndex&&length){this.checkBytesToIntInput(bytes,parseInt(length,10),parseInt(opt_startIndex,10));bytes=bytes.slice(opt_startIndex,opt_startIndex+length)}return decodeURIComponent(escape(String.fromCharCode.apply(null,bytes)))},byteArrayToShortArray:function(byteArray){var i,shortArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<16;i++)shortArray[i]=byteArray[2*i]|byteArray[2*i+1]<<8;return shortArray},shortArrayToByteArray:function(shortArray){var i,byteArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<16;i++)byteArray[2*i]=255&shortArray[i],byteArray[2*i+1]=shortArray[i]>>8;return byteArray},shortArrayToHexString:function(ary){for(var res="",i=0;i<ary.length;i++)res+=nibbleToChar[ary[i]>>4&15]+nibbleToChar[15&ary[i]]+nibbleToChar[ary[i]>>12&15]+nibbleToChar[ary[i]>>8&15];return res},intToBytes_:function(x,numBytes,unsignedMax,opt_bigEndian){var signedMax=Math.floor(unsignedMax/2),negativeMax=(signedMax+1)*-1;if(x!=Math.floor(x)||x<negativeMax||x>unsignedMax)throw new Error(x+" is not a "+8*numBytes+" bit integer");var current,bytes=[],numberType=x>=0&&x<=signedMax?0:x>signedMax&&x<=unsignedMax?1:2;2==numberType&&(x=x*-1-1);for(var i=0;i<numBytes;i++)current=2==numberType?255-x%256:x%256,opt_bigEndian?bytes.unshift(current):bytes.push(current),1==numberType?x=Math.floor(x/256):x>>=8;return bytes},int32ToBytes:function(x,opt_bigEndian){return converters.intToBytes_(x,4,4294967295,opt_bigEndian)},wordArrayToByteArrayEx:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,u8=new Uint8Array(sigBytes),i=0;i<sigBytes;i++){var byte=words[i>>>2]>>>24-i%4*8&255;u8[i]=byte}return u8},byteArrayToWordArrayEx:function(u8arr){for(var len=u8arr.length,words=[],i=0;i<len;i++)words[i>>>2]|=(255&u8arr[i])<<24-i%4*8;return CryptoJS.lib.WordArray.create(words,len)}}}(),__entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};String.prototype.escapeHTML=function(){return String(this).replace(/[&<>"']/g,function(s){return __entityMap[s]})},String.prototype.unescapeHTML=function(){return String(this).replace("&amp;","&").replace("&lt;","<").replace("&gt;",">").replace("&quot;",'"').replace("&#39;","'").replace("&#x2F;","/")},String.prototype.nl2br=function(){return String(this).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Number.prototype.pad=function(size){var s=String(this);for("number"!=typeof size&&(size=2);s.length<size;)s="0"+s;return s},"function"!=typeof Object.keys&&!function(){function Object_keys(obj){var name,keys=[];for(name in obj)obj.hasOwnProperty(name)&&keys.push(name);return keys}Object.keys=Object_keys}(),String.prototype.autoLink=function(){var output=String(this).escapeHTML(),pattern=/(^|\s)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;return output.replace(pattern,"$1<a href='$2' target='_blank'>$2</a>")};var Currency=function(data){return data=data||{},this.roundingMode=Decimal.ROUND_HALF_UP,this.displayName=data.displayName,this.symbol=data.symbol,this.precision=data.precision,void 0!==data.roundingMode&&(this.roundingMode=data.roundingMode),this};Currency.WAV=new Currency({displayName:"Wave",symbol:"",precision:8}),Currency.BTC=new Currency({displayName:"Bitcoin",symbol:"B",precision:8}),Currency.USD=new Currency({displayName:"US Dollar",symbol:"$",precision:2}),Currency.EUR=new Currency({displayName:"Euro",symbol:"€",precision:2}),Currency.CNY=new Currency({displayName:"Chinese Yuan",symbol:"¥",precision:2});var Money=function(amount,currency){if(void 0===amount)throw Error("Amount is required");if(void 0===currency)throw Error("Currency is required");this.amount=new Decimal(amount),this.currency=currency;var integerPart=function(value){return value.trunc()},fractionPart=function(value){return value.minus(integerPart(value))},format=function(value){return value.toFixed(currency.precision,currency.roundingMode)},validateCurrency=function(expected,actual){if(expected.currency!==actual.currency)throw Error("Currencies must be the same for operands. Expected: "+expected.currency.displayName+"; Actual: "+actual.currency.displayName)},fromTokensToCoins=function(valueInTokens,currencyPrecision){return valueInTokens.mul(Math.pow(10,currencyPrecision)).trunc()},fromCoinsToTokens=function(valueInCoins,currencyPrecision){return valueInCoins.trunc().div(Math.pow(10,currencyPrecision))};return this.formatAmount=function(stripZeroes){return stripZeroes?this.toTokens().toString():format(this.amount)},this.formatIntegerPart=function(){return integerPart(this.amount).toFixed(0)},this.formatFractionPart=function(){var valueWithLeadingZero=format(fractionPart(this.amount));return valueWithLeadingZero.slice(1)},this.toTokens=function(){var result=fromCoinsToTokens(fromTokensToCoins(this.amount,this.currency.precision),this.currency.precision);return result.toNumber()},this.toCoins=function(){return fromTokensToCoins(this.amount,this.currency.precision).toNumber()},this.plus=function(money){return validateCurrency(this.currency,money.currency),new Money(this.amount.plus(money.amount),this.currency)},this.minus=function(money){return validateCurrency(this.currency,money.currency),new Money(this.amount.minus(money.amount),this.currency)},this.greaterThan=function(other){return validateCurrency(this.currency,other.currency),this.amount.greaterThan(other.amount)},this.lessThan=function(other){return validateCurrency(this.currency,other.currency),this.amount.lessThan(other.amount)},this};Money.fromTokens=function(amount,currency){return new Money(amount,currency)},Money.fromCoins=function(amount,currency){if(currency=currency||{},void 0===currency.precision)throw new Error("A valid currency must be provided");return amount=new Decimal(amount),amount=amount.div(Math.pow(10,currency.precision)),new Money(amount,currency)},Decimal.config({toExpNeg:-(Currency.WAV.precision+1)}),function(){"use strict";angular.module("waves.core",[])}(),function(){"use strict";angular.module("waves.core").constant("constants.core",{CLIENT_VERSION:"0.4.1a",NODE_ADDRESS:"http://52.30.47.67:6869",NETWORK_NAME:"devel",ADDRESS_VERSION:1,NETWORK_CODE:"T",INITIAL_NONCE:0}),angular.module("waves.core").constant("constants.address",{RAW_ADDRESS_LENGTH:35,ADDRESS_PREFIX:"1W",MAINNET_ADDRESS_REGEXP:/^[a-zA-Z0-9]{35}$/}),angular.module("waves.core").constant("constants.ui",{MINIMUM_PAYMENT_AMOUNT:1e-8,MINIMUM_TRANSACTION_FEE:.001,AMOUNT_DECIMAL_PLACES:8})}(),function(){"use strict";angular.module("waves.core.services",["waves.core","restangular"]).run(["Restangular","constants.core",function(rest,constants){rest.setBaseUrl(constants.NODE_ADDRESS)}])}(),function(){"use strict";angular.module("waves.core.services").service("accountService",["storageService",function(storageService){this.addAccount=function(accountInfo,onDataUpdatedCallback){storageService.loadState(function(state){state=state||{},state.accounts||(state.accounts=[]),state.accounts.push(accountInfo),storageService.saveState(state,onDataUpdatedCallback)})},this.removeAccount=function(accountIndex,onAccountRemovedCallback){storageService.loadState(function(state){state.accounts.splice(accountIndex,1),storageService.saveState(state,onAccountRemovedCallback)})},this.getAccounts=function(onAccountsLoadedCallback){storageService.loadState(function(state){onAccountsLoadedCallback(state.accounts)})}}])}(),function(){"use strict";angular.module("waves.core.services").service("addressService",["constants.address","cryptoService",function(constants,cryptoService){function WaveAddress(rawAddress){if(void 0===rawAddress)throw new Error("Address must be defined");this.getRawAddress=function(){return rawAddress},this.getDisplayAddress=function(){return constants.ADDRESS_PREFIX+rawAddress}}this.fromDisplayToRaw=function(displayAddress){var address=displayAddress;return(address.length>constants.RAW_ADDRESS_LENGTH||address.startsWith(constants.ADDRESS_PREFIX))&&(address=address.substr(constants.ADDRESS_PREFIX.length,address.length-constants.ADDRESS_PREFIX.length)),address},this.validateRawAddress=function(rawAddress){return constants.MAINNET_ADDRESS_REGEXP.test(rawAddress)},this.validateDisplayAddress=function(displayAddress){var address=this.fromDisplayToRaw(displayAddress);return this.validateRawAddress(address)},this.fromRawAddress=function(rawAddress){if(!this.validateRawAddress(rawAddress))throw new Error("Raw address is malformed");return new WaveAddress(rawAddress)},this.fromDisplayAddress=function(displayAddress){if(!this.validateDisplayAddress(displayAddress))throw new Error("Display address is malformed");return new WaveAddress(this.fromDisplayToRaw(displayAddress))},this.buildAddress=function(encodedPublicKey){return this.fromRawAddress(cryptoService.buildRawAddress(encodedPublicKey))}}])}(),function(){"use strict";angular.module("waves.core.services").service("cryptoService",["constants.core","$window",function(constants,window){var getNetworkIdByte=function(){return 255&constants.NETWORK_CODE.charCodeAt(0)},appendUint8Arrays=function(array1,array2){var tmp=new Uint8Array(array1.length+array2.length);return tmp.set(array1,0),tmp.set(array2,array1.length),tmp},appendNonce=function(originalSeed){var nonce=new Uint8Array(converters.int32ToBytes(constants.INITIAL_NONCE,!0));return appendUint8Arrays(nonce,originalSeed)},sha256=function(message){var bytes;bytes="string"==typeof message?converters.stringToByteArray(message):message;var wordArray=converters.byteArrayToWordArrayEx(new Uint8Array(bytes)),resultWordArray=CryptoJS.SHA256(wordArray);return converters.wordArrayToByteArrayEx(resultWordArray)},prepareKey=function(key){for(var rounds=1e3,digest=key,i=0;i<rounds;i++)digest=converters.byteArrayToHexString(sha256(digest));return digest};this.blake2b=function(input){return blake2b(input,null,32)},this.keccak=function(messageBytes){return keccak_256.array(messageBytes)},this.sha256=sha256,this.hashChain=function(noncedSecretPhraseBytes){return this.keccak(this.blake2b(new Uint8Array(noncedSecretPhraseBytes)))},this.base58={encode:function(buffer){return Base58.encode(buffer)},decode:function(string){return Base58.decode(string)}},this.buildAccountSeedHash=function(seedBytes){var data=appendNonce(seedBytes),seedHash=this.hashChain(data);return sha256(Array.prototype.slice.call(seedHash))},this.buildPublicKey=function(seedBytes){var accountSeedHash=this.buildAccountSeedHash(seedBytes),p=axlsign.generateKeyPair(accountSeedHash);return this.base58.encode(p.public)},this.buildPrivateKey=function(seedBytes){var accountSeedHash=this.buildAccountSeedHash(seedBytes),p=axlsign.generateKeyPair(accountSeedHash);return this.base58.encode(p.private)},this.buildRawAddress=function(encodedPublicKey){var publicKey=this.base58.decode(encodedPublicKey),publicKeyHash=this.hashChain(publicKey),prefix=new Uint8Array(2);prefix[0]=constants.ADDRESS_VERSION,prefix[1]=getNetworkIdByte();var unhashedAddress=appendUint8Arrays(prefix,publicKeyHash.slice(0,20)),addressHash=this.hashChain(unhashedAddress).slice(0,4);return this.base58.encode(appendUint8Arrays(unhashedAddress,addressHash))},this.getPublicKey=function(secretPhrase){return this.buildPublicKey(converters.stringToByteArray(secretPhrase))},this.getPrivateKey=function(secretPhrase){return this.buildPrivateKey(converters.stringToByteArray(secretPhrase))},this.nonDeterministicSign=function(privateKey,dataToSign){var random,crypto=window.crypto||window.msCrypto;crypto&&(random=new Uint8Array(64),crypto.getRandomValues(random));var signature=axlsign.sign(privateKey,new Uint8Array(dataToSign),random);return this.base58.encode(signature)},this.deterministicSign=function(privateKey,dataToSign){var signature=axlsign.sign(privateKey,new Uint8Array(dataToSign));return this.base58.encode(signature)},this.verify=function(senderPublicKey,dataToSign,signatureBytes){return axlsign.verify(senderPublicKey,dataToSign,signatureBytes)},this.encryptWalletSeed=function(seed,key){var aesKey=prepareKey(key);return CryptoJS.AES.encrypt(seed,aesKey)},this.decryptWalletSeed=function(cipher,key,checksum){var aesKey=prepareKey(key),data=CryptoJS.AES.decrypt(cipher,aesKey),actualChecksum=this.seedChecksum(converters.hexStringToByteArray(data.toString()));return actualChecksum===checksum&&converters.hexStringToString(data.toString())},this.seedChecksum=function(seed){return converters.byteArrayToHexString(sha256(seed))}}])}(),function(){"use strict";angular.module("waves.core.services").service("apiService",["Restangular",function(rest){var blocksApi=rest.all("blocks");this.blocks={height:function(){return blocksApi.get("height")},last:function(){return blocksApi.get("last")},list:function(startHeight,endHeight){return blocksApi.one("seq",startHeight).all(endHeight).getList()}};var addressApi=rest.all("addresses");this.address={balance:function(address){return addressApi.one("balance",address.getRawAddress()).get()}};var transactionApi=rest.all("transactions");this.transactions={unconfirmed:function(){return transactionApi.all("unconfirmed").getList()},list:function(address,max){return max=max||50,transactionApi.one("address",address.getRawAddress()).one("limit",max).getList()}};var wavesApi=rest.all("waves");this.broadcastPayment=function(signedPaymentTransaction){return wavesApi.all("broadcast-signed-payment").post(signedPaymentTransaction)}}])}(),function(){"use strict";angular.module("waves.core.services").service("chromeStorageService",[function(){var $key="WavesAccounts";this.saveState=function(state,onSuccessCallback){var json={};json[$key]=state,chrome.storage.sync.set(json,onSuccessCallback)},this.loadState=function(onDataReadCallback){chrome.storage.sync.get($key,function(data){onDataReadCallback(data[$key])})}}])}(),function(){"use strict";angular.module("waves.core.services").service("html5StorageService",["constants.core","$window",function(constants,window){if(angular.isUndefined(constants.NETWORK_NAME))throw new Error("Network name hasn't been configured");var $key="Waves"+constants.NETWORK_NAME;this.saveState=function(state,onSuccessCallback){var serialized=angular.toJson(state);window.localStorage.setItem($key,serialized),onSuccessCallback&&onSuccessCallback()},this.loadState=function(onDataReadCallback){if(onDataReadCallback){var data,serialized=window.localStorage.getItem($key);serialized&&(data=angular.fromJson(serialized)),onDataReadCallback(data)}},this.clear=function(onClearedCallback){window.localStorage.removeItem($key),onClearedCallback()}}])}();